@model IEnumerable<FavoriteBook>
@using Microsoft.AspNetCore.Identity
@using Bookweb.Areas.Identity.Data
@inject UserManager<BookwebUser> usermanager
@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}


@if (Model.Count() == 0)
{
    <p>You list of favorite books is empty. Head to list of all books and add Your favorites!!!</p>
}
else
{
    List<FavoriteBook> list = new List<FavoriteBook>();
    foreach (var b in Model)
    {
        var user = await usermanager.GetUserAsync(User);
        var userid = user?.Id;
        if (b.HolderId == userid)
        {
            list.Add(b);
            <div>
                <span>@list.Count</span>
                <span>@b.Title</span>
                <span>@b.Author</span>
                <span>@b.Description</span>
                <span><a href="/Book/RemoveFromFavorite?bookId=@b.ID&holderId=@b.HolderId">Remove from favorite list</a></span>
            </div>
        }
    }
}